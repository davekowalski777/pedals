[build]
command = """
# Create necessary directories
mkdir -p /opt/build/repo/staticfiles &&
mkdir -p /opt/build/repo/functions/django &&

# Copy all project files to functions directory
cp -r * /opt/build/repo/functions/django/ &&

# Copy static files
cp -r static/* /opt/build/repo/staticfiles/ &&

# Install requirements
pip install -r requirements.txt
"""
publish = "staticfiles"

[build.environment]
PYTHON_VERSION = "3.9"

[[redirects]]
from = "/*"
to = "/.netlify/functions/django/:splat"
status = 200
force = true

[functions]
directory = "functions"
node_bundler = "esbuild"

[build.processing]
skip_processing = false
